{"remainingRequest":"/Users/alex/Desktop/myproject/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/Users/alex/Desktop/myproject/src/views/activityList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/alex/Desktop/myproject/src/views/activityList.vue","mtime":1574172168760},{"path":"/Users/alex/Desktop/myproject/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alex/Desktop/myproject/node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alex/Desktop/myproject/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/alex/Desktop/myproject/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alex/Desktop/myproject/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJhY3Rpdml0LWxpc3QiLA0KICBkYXRhKCl7DQogICAgcmV0dXJuIHsNCiAgICAgIGJhcjogW10sDQogICAgICBsb2FkaW5nOiBmYWxzZSwNCiAgICAgIGZpbmlzaGVkOiBmYWxzZSwNCiAgICAgIGxpc3Q6IFtdLA0KICAgICAgcGFnZTogMSwNCiAgICAgIHNpemU6IDUsDQogICAgICBhY3RpdmVzOiAiIiwNCiAgICAgIGxvYWRpbmc6IGZhbHNlLA0KICAgICAgZmluaXNoZWQ6IGZhbHNlDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCl7DQogICAgdGhpcy5xdWVyeUJ5VHlwZSgpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBvbkxvYWQoKSB7DQogICAgICAvLyDlvILmraXmm7TmlrDmlbDmja4NCiAgICAgIHRoaXMucXVlcnlBbGxUZW1wbGF0ZSgpDQogICAgfSwNCiAgICBhc3luYyBxdWVyeUFsbFRlbXBsYXRlKCl7DQogICAgICBsZXQge2RhdGE6IHJlc30gPSBhd2FpdCB0aGlzLiRhcGkuY29tbW9uLnF1ZXJ5QWxsVGVtcGxhdGUoew0KICAgICAgICBwYWdlU2l6ZTogdGhpcy5zaXplLA0KICAgICAgICBwYWdlTnVtOiAodGhpcy5wYWdlIC0gMSkgKiA1ICsgMSwNCiAgICAgICAgYWN0aXZpdHlJZDogISF0aGlzLmFjdGl2ZXMgPyB0aGlzLmFjdGl2ZXMgOiB1bmRlZmluZWQNCiAgICAgIH0pDQogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgIHRoaXMucGFnZSsrOw0KICAgICAgaWYocmVzLmNvZGUgPT09ICcwMDAwJyl7DQogICAgICAgIGlmKHJlcy5yZXN1bHQuZGF0YS5sZW5ndGggPT0gMCl7DQogICAgICAgICAgdGhpcy5maW5pc2hlZCA9IHRydWU7DQogICAgICAgIH1lbHNlew0KICAgICAgICAgIHRoaXMubGlzdCA9IHRoaXMubGlzdC5jb25jYXQocmVzLnJlc3VsdC5kYXRhKTsNCiAgICAgICAgfQ0KICAgICAgfWVsc2V7DQogICAgICAgIHRoaXMuZmluaXNoZWQgPSB0cnVlOw0KICAgICAgICB0aGlzLiRub3RpZnkoeyB0eXBlOiAnZGFuZ2VyJywgbWVzc2FnZTogcmVzLm1zZyB9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgaXRlbUNsaWNrKGl0ZW0pew0KICAgICAgaWYoaXRlbS5hY3RpdmUpew0KICAgICAgICBpdGVtLmFjdGl2ZSA9IGZhbHNlOw0KICAgICAgICB0aGlzLmxpc3QgPSBbXTsNCiAgICAgICAgdGhpcy5wYWdlID0gMTsNCiAgICAgICAgdGhpcy5hY3RpdmVzID0gIiI7DQogICAgICB9ZWxzZXsNCiAgICAgICAgdGhpcy5iYXIuZmlsdGVyKCBlID0+IHsNCiAgICAgICAgICBlLmFjdGl2ZSA9IGZhbHNlOw0KICAgICAgICB9KQ0KICAgICAgICBpdGVtLmFjdGl2ZSA9IHRydWU7DQogICAgICAgIHRoaXMubGlzdCA9IFtdOw0KICAgICAgICB0aGlzLnBhZ2UgPSAxOw0KICAgICAgICB0aGlzLmFjdGl2ZXMgPSBpdGVtLnZhbHVlOw0KICAgICAgfQ0KICAgICAgdGhpcy5xdWVyeUFsbFRlbXBsYXRlKCk7DQogICAgfSwNCiAgICBhc3luYyBxdWVyeUJ5VHlwZSgpew0KICAgICAgdGhpcy4kdG9hc3QubG9hZGluZyh7DQogICAgICAgIG1lc3NhZ2U6ICfliqDovb3kuK0uLi4nLA0KICAgICAgICBkdXJhdGlvbjogMA0KICAgICAgfSk7DQogICAgICBsZXQge2RhdGE6IHJlc30gPSBhd2FpdCB0aGlzLiRhcGkuY29tbW9uLnF1ZXJ5QnlUeXBlKHsNCiAgICAgICAgInR5cGUiOiAiYmFyIg0KICAgICAgfSk7DQogICAgICB0aGlzLiR0b2FzdC5jbGVhcigpOw0KICAgICAgaWYocmVzLmNvZGUgPT09ICIwMDAwIil7DQogICAgICAgIHJlcy5yZXN1bHQuZGF0YS5maWx0ZXIoIGUgPT4gew0KICAgICAgICAgIGUuYWN0aXZlID0gZmFsc2U7DQogICAgICAgIH0pDQogICAgICAgIHRoaXMuYmFyID0gcmVzLnJlc3VsdC5kYXRhDQogICAgICB9ZWxzZXsNCiAgICAgICAgdGhpcy4kbm90aWZ5KHsgdHlwZTogJ3dhcm5pbmcnLCBtZXNzYWdlOiByZXMubXNnIH0pOw0KICAgICAgfQ0KICAgIH0sDQogICAgbXlBY3RpdmUoKXsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOiAndGVtcGxhdGVMaXN0J30pDQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["activityList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"activityList.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n    <div class=\"activityList\">\r\n        <div style=\"background: rgb(248, 248, 248);\">\r\n            <div class=\"active-wrap\">\r\n                <div v-for=\"item in bar\" :key=\"item.id\" class=\"item\" :class=\"{'active': item.active || false}\" @click=\"itemClick(item)\">\r\n                    {{item.name}} <span>{{item.remark}}</span>\r\n                </div>\r\n            </div>\r\n            <div class=\"title\">\r\n                <span style=\"color: red;font-size: 16px;\">请根据您的活动需求选择活动模板</span>\r\n                <span style=\"font-size: 12px;\">【不清楚选啥活动？不知道咋做？ <span style=\"color: #0955c5;\">查看案例</span>】</span>\r\n            </div>\r\n        </div>\r\n        <van-list\r\n          v-model=\"loading\"\r\n          :finished=\"finished\"\r\n          :offset=\"20\"\r\n          finished-text=\"没有更多了\"\r\n          class=\"activity\"\r\n          @load=\"onLoad\"\r\n        >\r\n          <div class=\"item\" v-for=\"item in list\" :key=\"item.id\">\r\n                <div class=\"img-wrap\">\r\n                    <img :src=\"item.thumbnail\" width=\"100%\" height=\"100%\"/>\r\n                    <span>{{`已有${!!item.useNum ? item.useNum : 0}次制作`}}</span>\r\n                </div>\r\n                <h2>{{item.activityName}}</h2>\r\n                <van-button round type=\"default\" size=\"mini\">查看示例</van-button>\r\n                <van-button round type=\"info\" size=\"mini\">开始制作</van-button>\r\n            </div>\r\n        </van-list>\r\n        <div class=\"footer-bar\">\r\n            <div class=\"item\" @click=\"myActive\">\r\n                <van-icon name=\"todo-list\" />\r\n                <span>我的活动</span>\r\n            </div>\r\n            <div class=\"item\">\r\n                <van-icon name=\"invition\" />\r\n                <span>精选案例</span>\r\n            </div>\r\n            <div class=\"item\">\r\n                <van-icon name=\"like\"/>\r\n                <span>客服</span>\r\n            </div>\r\n            <div class=\"item\">\r\n                <van-icon name=\"column\" />\r\n                <span>活动教程</span>\r\n            </div>\r\n            <div class=\"item\">\r\n                <van-icon name=\"question\" />\r\n                <span>常见问题</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"activit-list\",\r\n  data(){\r\n    return {\r\n      bar: [],\r\n      loading: false,\r\n      finished: false,\r\n      list: [],\r\n      page: 1,\r\n      size: 5,\r\n      actives: \"\",\r\n      loading: false,\r\n      finished: false\r\n    }\r\n  },\r\n  mounted(){\r\n    this.queryByType()\r\n  },\r\n  methods: {\r\n    onLoad() {\r\n      // 异步更新数据\r\n      this.queryAllTemplate()\r\n    },\r\n    async queryAllTemplate(){\r\n      let {data: res} = await this.$api.common.queryAllTemplate({\r\n        pageSize: this.size,\r\n        pageNum: (this.page - 1) * 5 + 1,\r\n        activityId: !!this.actives ? this.actives : undefined\r\n      })\r\n      this.loading = false;\r\n      this.page++;\r\n      if(res.code === '0000'){\r\n        if(res.result.data.length == 0){\r\n          this.finished = true;\r\n        }else{\r\n          this.list = this.list.concat(res.result.data);\r\n        }\r\n      }else{\r\n        this.finished = true;\r\n        this.$notify({ type: 'danger', message: res.msg })\r\n      }\r\n    },\r\n    itemClick(item){\r\n      if(item.active){\r\n        item.active = false;\r\n        this.list = [];\r\n        this.page = 1;\r\n        this.actives = \"\";\r\n      }else{\r\n        this.bar.filter( e => {\r\n          e.active = false;\r\n        })\r\n        item.active = true;\r\n        this.list = [];\r\n        this.page = 1;\r\n        this.actives = item.value;\r\n      }\r\n      this.queryAllTemplate();\r\n    },\r\n    async queryByType(){\r\n      this.$toast.loading({\r\n        message: '加载中...',\r\n        duration: 0\r\n      });\r\n      let {data: res} = await this.$api.common.queryByType({\r\n        \"type\": \"bar\"\r\n      });\r\n      this.$toast.clear();\r\n      if(res.code === \"0000\"){\r\n        res.result.data.filter( e => {\r\n          e.active = false;\r\n        })\r\n        this.bar = res.result.data\r\n      }else{\r\n        this.$notify({ type: 'warning', message: res.msg });\r\n      }\r\n    },\r\n    myActive(){\r\n      this.$router.push({path: 'templateList'})\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.footer-bar {\r\n  position: fixed;\r\n  bottom: 0;\r\n  height: 60px;\r\n  width: 100%;\r\n  border-top: 1px solid#ccc;\r\n  background: #fffffff0;\r\n  z-index: 200;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  .item {\r\n    width: 60px;\r\n    height: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n    font-size: 14px;\r\n    font-weight: bold;\r\n    color: #a2a2a2;\r\n    i {\r\n      font-size: 38px;\r\n    }\r\n    .van-icon-like {\r\n      position: relative;\r\n      top: -15px;\r\n      color: red;\r\n    }\r\n  }\r\n}\r\n.title {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  height: 50px;\r\n}\r\n.activity {\r\n  padding: 0px 5px;\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  flex-wrap: wrap;\r\n  padding-bottom: 1.5rem;\r\n  background: rgb(248, 248, 248);\r\n  /deep/ .van-list__loading{\r\n    width: 375px;\r\n  }\r\n  /deep/ .van-list__finished-text{\r\n    width: 375px;\r\n  }\r\n  .item {\r\n    width: 160px;\r\n    height: 250px;\r\n    border: 1px solid rgba(255, 255, 255, 0);\r\n    margin: 10.25px;\r\n    .img-wrap {\r\n      border-top-right-radius: 15px;\r\n      border-top-left-radius: 15px;\r\n      overflow: hidden;\r\n      height: 160px;\r\n      position: relative;\r\n      span {\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 30px;\r\n        line-height: 30px;\r\n        text-align: center;\r\n        color: #fff;\r\n        background: rgba(0, 0, 0, 0.541);\r\n        bottom: 0;\r\n        left: 0;\r\n        z-index: 100;\r\n        font-size: 16px;\r\n      }\r\n    }\r\n    h2 {\r\n      font-size: 14px;\r\n      margin: 2px 0;\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n      padding: 0 5px;\r\n    }\r\n    /deep/ .van-button {\r\n      margin: 10px;\r\n      width: 60px;\r\n    }\r\n  }\r\n}\r\n.active-wrap {\r\n  padding: 10px 5px;\r\n\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  flex-wrap: wrap;\r\n  .item {\r\n    margin: 5px;\r\n    padding: 5px 5px;\r\n    height: 15px;\r\n    border-radius: 3px;\r\n    font-size: 12px;\r\n    background: #fff;\r\n    border: 1px solid rgb(74, 156, 250);\r\n    span {\r\n      color: red;\r\n      font-size: 6px;\r\n      margin: 0 0 0 5px;\r\n      position: relative;\r\n      top: -3px;\r\n    }\r\n  }\r\n  .item.active {\r\n    background: rgb(74, 156, 250);\r\n    color: #fff;\r\n  }\r\n}\r\n</style>\r\n"]}]}
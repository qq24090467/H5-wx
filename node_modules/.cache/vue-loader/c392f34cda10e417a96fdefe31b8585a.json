{"remainingRequest":"/Users/alex/Desktop/myproject/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js??vue-loader-options!/Users/alex/Desktop/myproject/src/components/addComponent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/alex/Desktop/myproject/src/components/addComponent.vue","mtime":1574312025013},{"path":"/Users/alex/Desktop/myproject/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alex/Desktop/myproject/node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alex/Desktop/myproject/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/alex/Desktop/myproject/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alex/Desktop/myproject/node_modules/_vue-loader@15.7.2@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWVGV4dGFyZWEgZnJvbSAiLi90ZXh0YXJlYSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImFkZC1jb21wb25lbnQiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhY3RpdmVMaXN0OiBbXSwKICAgICAgaXRlbUluZGV4OiAnJwogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIFZUZXh0YXJlYQogIH0sCiAgcHJvcHM6IHsKICAgIHR5cGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiIgogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYWZ0ZXJSZWFkKGZpbGUpewogICAgICAgIHRoaXMudXBsb2FkKGZpbGUuZmlsZSkKICAgIH0sCiAgICBjbGlja0l0ZW0oaW5kZXgpewogICAgICAgIHRoaXMuaXRlbUluZGV4ID0gaW5kZXg7CiAgICB9LAogICAgaW1nRGVsZXRlKGl0ZW0pewogICAgICAgIGl0ZW0uaW1nVXJsID0gW107CiAgICB9LAogICAgYXN5bmMgdXBsb2FkKGZpbGUpIHsKICAgICAgICBsZXQgZm9ybSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgIGZvcm0uYXBwZW5kKCJ1cGZpbGUgIiwgZmlsZSk7CiAgICAgICAgbGV0IGNvbmZpZyA9IHsKICAgICAgICAgICAgaGVhZGVyczogeyAiQ29udGVudC1UeXBlIjogIm11bHRpcGFydC9mb3JtLWRhdGEiIH0KICAgICAgICB9OwogICAgICAgIGxldCB7ZGF0YTogcmVzfSA9IHRoaXMuJGFwaS5jb21tb24udXBsb2FkKGZvcm0pICAgIAogICAgICAgIGlmIChyZXMuY29kZSA9PSAiMDAwMCIpIHsKICAgICAgICAgICAgdGhpcy5hY3RpdmVMaXN0W3RoaXMuaXRlbUluZGV4XS5pbWdVcmwucHVzaChyZXMucmVzdWx0LmRhdGEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7dHlwZTogImRhbmdlciIsIG1lc3NhZ2U6IHJlcy5tc2d9KQogICAgICAgIH0KICAgIH0sCiAgICBibHVyRnVuY3Rpb24oZSkgewogICAgICB2YXIgc2Nyb2xsVG9wID0KICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8CiAgICAgICAgd2luZG93LnBhZ2VZT2Zmc2V0IHx8CiAgICAgICAgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7IC8v6I635Y+W6L2v6ZSu55uY5ZSk6LW35YmN5rWP6KeI5Zmo5rua5Yqo6YOo5YiG55qE6auY5bqmCiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7CiAgICB9LAogICAgYWRkQWN0aXZlKHR5cGUpIHsKICAgICAgdGhpcy5hY3RpdmVMaXN0LnB1c2goewogICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgbGluazogIiIsCiAgICAgICAgZGVzOiAiIiwKICAgICAgICB0ZXh0OiAiIiwKICAgICAgICBpbWdVcmw6IFtdCiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZVRoaXMoaW5kZXgpIHsKICAgICAgdGhpcy5hY3RpdmVMaXN0LnNwbGljZShpbmRleCwgMSk7CiAgICB9LAogICAgdXBEYXRhKGluZGV4KSB7CiAgICAgIHRoaXMuYWN0aXZlTGlzdCA9IHRoaXMuc3dhcEl0ZW1zKHRoaXMuYWN0aXZlTGlzdCwgaW5kZXgsIGluZGV4IC0gMSk7CiAgICB9LAogICAgZG93bkRhdGEoaW5kZXgpIHsKICAgICAgdGhpcy5hY3RpdmVMaXN0ID0gdGhpcy5zd2FwSXRlbXModGhpcy5hY3RpdmVMaXN0LCBpbmRleCwgaW5kZXggKyAxKTsKICAgIH0sCiAgICBzd2FwSXRlbXM6IGZ1bmN0aW9uKGFyciwgaW5kZXgxLCBpbmRleDIpIHsKICAgICAgYXJyW2luZGV4MV0gPSBhcnIuc3BsaWNlKGluZGV4MiwgMSwgYXJyW2luZGV4MV0pWzBdOwogICAgICByZXR1cm4gYXJyOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["addComponent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addComponent.vue","sourceRoot":"src/components","sourcesContent":["。<template>\n  <div>\n       <div class=\"wrap-file\" v-for=\"(item, index) in activeList\" :key='index'>\n            <div class=\"tool-bar\">\n                <span @click=\"upData(index)\" v-if=\"index != 0\">上移</span>\n                <span @click=\"downData(index)\" v-if=\"index != activeList.length-1\">下移</span>\n            </div>\n                <van-icon name=\"clear\"  @click=\"deleteThis(index)\" class=\"delete\"/>\n                <van-uploader  v-if=\"item.type == 'img'\"  v-model=\"item.imgUrl\" @delete=\"imgDelete(item)\" :max-count=\"1\" :after-read=\"afterRead\" @click=\"clickItem(index)\"/>\n                <van-field\n                    v-if=\"item.type == 'media'\"\n                    class=\"c-textarea\"\n                    v-model=\"item.link\"\n                    rows=\"2\"\n                    autosize\n                    type=\"textarea\"\n                    maxlength=\"100\"\n                    placeholder=\"请输入视频地址【支持优酷、腾讯视频】\"\n                    show-word-limit\n                />\n                <van-field\n                    v-if=\"item.type == 'text'\"\n                    class=\"c-textarea\"\n                    v-model=\"item.text\"\n                    rows=\"2\"\n                    autosize\n                    type=\"textarea\"\n                    maxlength=\"100\"\n                    placeholder=\"建议填写机构的成立时间、经营范围、产品优势、场地图片、产品图片、以及荣誉介绍\"\n                    show-word-limit\n                />\n                <van-field\n                    v-if=\"item.type == 'textLink'\"\n                    class=\"c-textarea\"\n                    v-model=\"item.link\"\n                    rows=\"1\"\n                    autosize\n                    type=\"textarea\"\n                    maxlength=\"100\"\n                    placeholder=\"输入需要跳转的网址\"\n                    show-word-limit\n                />\n                <van-field\n                    v-if=\"item.type == 'textLink'\"\n                    class=\"c-textarea\"\n                    style=\"margin: 20px 0 0 0;\"\n                    v-model=\"item.des\"\n                    rows=\"1\"\n                    autosize\n                    type=\"textarea\"\n                    maxlength=\"100\"\n                    placeholder=\"输入超链接的文字描述\"\n                    show-word-limit\n                />\n        </div>\n        <div class='add'  @click=\"addActive('img')\"><van-icon name=\"plus\" />添加图片（最多添加10张图片） </div>\n        <div class='add'  @click=\"addActive('text')\"><van-icon name=\"plus\" />添加文本（最多添加10个文本内容） </div>\n        <div class='add'  @click=\"addActive('media')\"><van-icon name=\"plus\" />添加视频（最多添加5个视频） </div>\n        <div class='add'  @click=\"addActive('textLink')\"><van-icon name=\"plus\" />添加文字链接（最多添加10个链接） </div>\n  </div>\n</template>\n\n<script>\nimport VTextarea from \"./textarea\";\n\nexport default {\n  name: \"add-component\",\n  data() {\n    return {\n      activeList: [],\n      itemIndex: ''\n    };\n  },\n  components: {\n    VTextarea\n  },\n  props: {\n    type: {\n      type: String,\n      default: \"\"\n    }\n  },\n  methods: {\n    afterRead(file){\n        this.upload(file.file)\n    },\n    clickItem(index){\n        this.itemIndex = index;\n    },\n    imgDelete(item){\n        item.imgUrl = [];\n    },\n    async upload(file) {\n        let form = new FormData();\n        form.append(\"upfile \", file);\n        let config = {\n            headers: { \"Content-Type\": \"multipart/form-data\" }\n        };\n        let {data: res} = this.$api.common.upload(form)    \n        if (res.code == \"0000\") {\n            this.activeList[this.itemIndex].imgUrl.push(res.result.data);\n        } else {\n            this.$notify({type: \"danger\", message: res.msg})\n        }\n    },\n    blurFunction(e) {\n      var scrollTop =\n        document.documentElement.scrollTop ||\n        window.pageYOffset ||\n        document.body.scrollTop; //获取软键盘唤起前浏览器滚动部分的高度\n      document.documentElement.scrollTop = scrollTop;\n    },\n    addActive(type) {\n      this.activeList.push({\n        type: type,\n        link: \"\",\n        des: \"\",\n        text: \"\",\n        imgUrl: []\n      });\n    },\n    deleteThis(index) {\n      this.activeList.splice(index, 1);\n    },\n    upData(index) {\n      this.activeList = this.swapItems(this.activeList, index, index - 1);\n    },\n    downData(index) {\n      this.activeList = this.swapItems(this.activeList, index, index + 1);\n    },\n    swapItems: function(arr, index1, index2) {\n      arr[index1] = arr.splice(index2, 1, arr[index1])[0];\n      return arr;\n    }\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.add {\n  height: 1rem;\n  border-radius: 0.5rem;\n  width: 100%;\n  margin: 0.3rem auto;\n  display: flex;\n  justify-content: center;\n  color: 0.3rem;\n  border: 1px dashed #0b206d;\n  color: #0b206d;\n  align-items: center;\n}\n.tool-bar {\n  position: absolute;\n  height: 0.8rem;\n  top: -0.8rem;\n  width: 8.5rem;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n}\n.tool-bar span {\n  display: inline-block;\n  width: 1.5rem;\n  height: 0.6rem;\n  font-size: 0.4rem;\n  line-height: 0.6rem;\n  color: #fff;\n  text-align: center;\n  border-radius: 5px;\n  margin: 0 5px;\n  background: #171717;\n}\n.wrap-file {\n  position: relative;\n  margin: 1rem auto 0.2rem auto;\n  min-height: 3rem;\n  padding: 1px;\n}\n.delete {\n  position: absolute;\n  right: 0rem;\n  top: -0.6rem;\n  font-size: 24px;\n  z-index: 100;\n  color: #171717;\n}\n.text {\n  width: 5rem;\n  margin: 0.5rem 2rem;\n}\n.tag {\n  position: absolute;\n  left: 0.5rem;\n  top: 0.8rem;\n  font-size: 14px;\n  z-index: 100;\n}\n.c-textarea {\n  border: 1px dashed #0d1a31;\n  padding: 10px 15px;\n  border-radius: 5px;\n}\n</style>\n"]}]}
{"remainingRequest":"/Users/alex/Desktop/myproject/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!/Users/alex/Desktop/myproject/src/store/store-persistence-plugin.js","dependencies":[{"path":"/Users/alex/Desktop/myproject/src/store/store-persistence-plugin.js","mtime":1568276390000},{"path":"/Users/alex/Desktop/myproject/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/alex/Desktop/myproject/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIHNsLCB1bnNsOwp2YXIgb25seVNlc3Npb24gPSBmYWxzZTsKdmFyIExPQ0FMU1RPUkFHRSA9IDAsCiAgICBTRVNTSU9OU1RPUkFHRSA9IDEsCiAgICBLRVkgPSAiU09MVVRJT04gIiArIGxvY2F0aW9uLmhvc3RuYW1lICsgIiAiICsgbG9jYXRpb24ucG9ydCArICIgc3RvcmFnZSI7CnZhciBscyA9IHdpbmRvdy5sb2NhbFN0b3JhZ2U7CnZhciBzcyA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZTsKCnZhciB2dWV4QWxvbmcgPSBmdW5jdGlvbiB2dWV4QWxvbmcoc3RvcmUpIHsKICBpbml0QWxvbmcoc3RvcmUpOwogIHN0b3JlLnN1YnNjcmliZShmdW5jdGlvbiAobXV0YXRpb24sIHN0YXRlKSB7CiAgICBzYXZlTG9jYWwoc3RhdGUpOwogICAgc2F2ZVNlc3Npb24oc3RhdGUpOwogIH0pOwp9OwoKZXhwb3J0IGRlZmF1bHQgdnVleEFsb25nOwoKdmFyIHNhdmVMb2NhbCA9IGZ1bmN0aW9uIHNhdmVMb2NhbChzdGF0ZSkgewogIGlmIChvbmx5U2Vzc2lvbikgcmV0dXJuOwogIHNldEl0ZW0oS0VZLCBmaWx0ZXIoc3RhdGUpLCBMT0NBTFNUT1JBR0UpOwp9OwoKdmFyIHNhdmVTZXNzaW9uID0gZnVuY3Rpb24gc2F2ZVNlc3Npb24oc3RhdGUpIHsKICBpZiAoIXNsICYmICF1bnNsICYmICFvbmx5U2Vzc2lvbikgcmV0dXJuOwogIHNldEl0ZW0oS0VZLCBmaWx0ZXIoc3RhdGUpLCBTRVNTSU9OU1RPUkFHRSk7Cn07Cgp2YXIgZmlsdGVyID0gZnVuY3Rpb24gZmlsdGVyKHN0YXRlKSB7CiAgcmV0dXJuIHsKICAgIGNvbW1vbjogc3RhdGUuY29tbW9uLAogICAgaTE4bjogc3RhdGUuaTE4bgogIH07IC8v5Y+q5oyB5LmF5YyWY29tbW9u5Lit55qE5pWw5o2uCn07Ci8qKg0KICogSW5pdCB0aGlzIHBsdWdpbiB3aGVuIHN0b3JlIGluaXQNCiAqLwoKCnZhciBpbml0QWxvbmcgPSBmdW5jdGlvbiBpbml0QWxvbmcoc3RvcmUpIHsKICB2YXIgb2JqID0ge307CiAgaWYgKCFvbmx5U2Vzc2lvbiAmJiBnZXRJdGVtKEtFWSwgTE9DQUxTVE9SQUdFKSkgT2JqZWN0LmFzc2lnbihvYmosIGdldEl0ZW0oS0VZLCBMT0NBTFNUT1JBR0UpKTsKICBpZiAoZ2V0SXRlbShLRVksIFNFU1NJT05TVE9SQUdFKSkgT2JqZWN0LmFzc2lnbihvYmosIGdldEl0ZW0oS0VZLCBTRVNTSU9OU1RPUkFHRSkpOwogIHN0b3JlLmNvbW1pdCgic3luY1N0YXRlMkxvY2FsIiwgb2JqKTsKfTsKCnZhciBjb2RlZCA9IGZ1bmN0aW9uIGNvZGVkKHN0cikgewogIHJldHVybiB3aW5kb3cuYnRvYSh3aW5kb3cuZW5jb2RlVVJJQ29tcG9uZW50KHN0cikpOwp9OwoKdmFyIGVuY29kZWQgPSBmdW5jdGlvbiBlbmNvZGVkKHN0cikgewogIHJldHVybiB3aW5kb3cuZGVjb2RlVVJJQ29tcG9uZW50KHdpbmRvdy5hdG9iKHN0cikpOwp9OwoKdmFyIGdldEl0ZW0gPSBmdW5jdGlvbiBnZXRJdGVtKGtleSwgdHlwZSkgewogIHZhciBzdG9yYWdlID0gdHlwZSA9PSBMT0NBTFNUT1JBR0UgPyBscyA6IHNzOwoKICB0cnkgewogICAgcmV0dXJuIEpTT04ucGFyc2UoZW5jb2RlZChzdG9yYWdlLmdldEl0ZW0oa2V5KSkpOwogIH0gY2F0Y2ggKGVycikgewogICAgcmV0dXJuIG51bGw7CiAgfQp9OwoKdmFyIHNldEl0ZW0gPSBmdW5jdGlvbiBzZXRJdGVtKGtleSwgdmFsLCB0eXBlKSB7CiAgdmFyIHN0b3JhZ2UgPSB0eXBlID09IExPQ0FMU1RPUkFHRSA/IGxzIDogc3M7CiAgc3RvcmFnZS5zZXRJdGVtKGtleSwgY29kZWQoSlNPTi5zdHJpbmdpZnkodmFsKSkpOwp9OwoKdmFyIHJlbW92ZUl0ZW0gPSBmdW5jdGlvbiByZW1vdmVJdGVtKCkgewogIHNzLnJlbW92ZUl0ZW0oS0VZKTsKICBscy5yZW1vdmVJdGVtKEtFWSk7Cn07Cgp2dWV4QWxvbmcuY2xlYW4gPSByZW1vdmVJdGVtOwp3aW5kb3cuY2xlYW5WdWV4QWxvbmcgPSByZW1vdmVJdGVtOw=="},{"version":3,"sources":["/Users/alex/Desktop/myproject/src/store/store-persistence-plugin.js"],"names":["sl","unsl","onlySession","LOCALSTORAGE","SESSIONSTORAGE","KEY","location","hostname","port","ls","window","localStorage","ss","sessionStorage","vuexAlong","store","initAlong","subscribe","mutation","state","saveLocal","saveSession","setItem","filter","common","i18n","obj","getItem","Object","assign","commit","coded","str","btoa","encodeURIComponent","encoded","decodeURIComponent","atob","key","type","storage","JSON","parse","err","val","stringify","removeItem","clean","cleanVuexAlong"],"mappings":"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","sourcesContent":["let sl, unsl;\r\nlet onlySession = false;\r\nconst LOCALSTORAGE = 0,\r\n  SESSIONSTORAGE = 1,\r\n  KEY =\r\n    \"SOLUTION \" +\r\n    location.hostname +\r\n    \" \" +\r\n    location.port +\r\n    \" storage\";\r\nconst ls = window.localStorage;\r\nconst ss = window.sessionStorage;\r\n\r\nconst vuexAlong = store => {\r\n  initAlong(store);\r\n  store.subscribe(function(mutation, state) {\r\n    saveLocal(state);\r\n    saveSession(state);\r\n  });\r\n};\r\nexport default vuexAlong;\r\n\r\nconst saveLocal = state => {\r\n  if (onlySession) return;\r\n  setItem(KEY, filter(state), LOCALSTORAGE);\r\n};\r\n\r\nconst saveSession = state => {\r\n  if (!sl && !unsl && !onlySession) return;\r\n  setItem(KEY, filter(state), SESSIONSTORAGE);\r\n};\r\n\r\nconst filter = state => {\r\n  return {\r\n    common: state.common,\r\n    i18n: state.i18n\r\n  }; //只持久化common中的数据\r\n};\r\n\r\n/**\r\n * Init this plugin when store init\r\n */\r\nconst initAlong = store => {\r\n  let obj = {};\r\n  if (!onlySession && getItem(KEY, LOCALSTORAGE))\r\n    Object.assign(obj, getItem(KEY, LOCALSTORAGE));\r\n  if (getItem(KEY, SESSIONSTORAGE))\r\n    Object.assign(obj, getItem(KEY, SESSIONSTORAGE));\r\n  store.commit(\"syncState2Local\", obj);\r\n};\r\n\r\nconst coded = str => {\r\n  return window.btoa(window.encodeURIComponent(str));\r\n};\r\nconst encoded = str => {\r\n  return window.decodeURIComponent(window.atob(str));\r\n};\r\n\r\nconst getItem = (key, type) => {\r\n  let storage = type == LOCALSTORAGE ? ls : ss;\r\n  try {\r\n    return JSON.parse(encoded(storage.getItem(key)));\r\n  } catch (err) {\r\n    return null;\r\n  }\r\n};\r\n\r\nconst setItem = (key, val, type) => {\r\n  let storage = type == LOCALSTORAGE ? ls : ss;\r\n  storage.setItem(key, coded(JSON.stringify(val)));\r\n};\r\n\r\nconst removeItem = () => {\r\n  ss.removeItem(KEY);\r\n  ls.removeItem(KEY);\r\n};\r\nvuexAlong.clean = removeItem;\r\nwindow.cleanVuexAlong = removeItem;\r\n"]}]}